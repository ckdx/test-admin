import{R as B}from"./rule.f3072239.js";import{f as C}from"./index.5410f799.js";import{u as E}from"./useLoading.38b1a20d.js";import{u as g}from"./useBoolean.c16d084f.js";import{aF as A,aH as v}from"./vendor.5d21b69b.js";function w(t){if(t<=0&&t%1!==0)throw Error("\u5012\u8BA1\u65F6\u7684\u65F6\u95F4\u5E94\u8BE5\u4E3A\u4E00\u4E2A\u6B63\u6574\u6570\uFF01");const{bool:i,setTrue:l,setFalse:f}=g(!1),e=A(0),s=v(()=>Boolean(e.value));let o;function c(m=t){e.value||(f(),e.value=m,o=setInterval(()=>{e.value-=1,e.value<=0&&(clearInterval(o),l())},1e3))}function F(){o=clearInterval(o),e.value=0}return{counts:e,isCounting:s,start:c,stop:F,isComplete:i}}function $(){const{loading:t,startLoading:i,endLoading:l}=E(),{counts:f,start:e,isCounting:s}=w(60),o="\u83B7\u53D6\u9A8C\u8BC1\u7801",c=u=>`${u}\u79D2\u540E\u91CD\u65B0\u83B7\u53D6`,F=v(()=>{let u=o;return t.value&&(u=""),s.value&&(u=c(f.value)),u});function m(u){var r,a;let n=!0;return u.trim()===""?((r=window.$message)==null||r.error("\u624B\u673A\u53F7\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),n=!1):B.test(u)||((a=window.$message)==null||a.error("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u9519\u8BEF\uFF01"),n=!1),n}async function d(u){var a;if(!m(u)||t.value)return;i();const{data:r}=await C(u);r&&((a=window.$message)==null||a.success("\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F\uFF01"),e()),l()}return{label:F,start:e,isCounting:s,getSmsCode:d,loading:t}}export{$ as u};
